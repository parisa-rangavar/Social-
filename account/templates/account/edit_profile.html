{% extends 'base.html' %}

{% block content %}
{#    <form action="" method="post">#}
{#        {% csrf_token %}#}
{#        {{ form.as_p }}#}
{#        <input type="submit" value="Edit">#}
{##}
{#    </form>#}

        <div class="row py-5 px-4">
            <div class="col-md-5 mx-auto"> <!-- Profile widget -->
                    <div class="bg-white shadow rounded overflow-hidden">

                            <div class="bg-light p-4 d-flex justify-content-end text-center">
                                     <form class="" action="" method="post" enctype="multipart/form-data">
                                            {% csrf_token %}
{#                                            {{ form.as_p }}#}

                                         <div class="form-group">
                                             {{ form.age.errors }}
                                             {{ form.age.label}}
                                             {{ form.age}}
                                         </div>

                                         <div class="form-group">
                                             {{ form.bio.errors }}
                                             {{ form.bio.label}}
                                             {{ form.bio}}
                                         </div>

                                         <div class="form-group">
                                             {{ form.email.errors }}
                                             {{ form.email.label}}
                                             {{ form.email}}
                                         </div>

{#                                         <div class="form-group">#}
{#                                             {{ form.image.errors }}#}
{#                                             {{ form.image.label}}#}
{#                                             <img alt="profil image" width="130" class="rounded mb-2 img-thumbnail" src="{{ user.profile.image.url }}">#}
{#                                             {{ form.image}}#}
{#                                             <input type="file" name="{{form.image.html_name}}" id="{{form.image.id_for_label}}">#}
{##}
{##}
{#                                         </div>#}
{##}
{#                                            <img alt="profil image" width="130" class="rounded mb-2 img-thumbnail" src="{{ user.profile.image.url }}">#}
{#                                         <div class="form-group">#}
{#                                                {{ form.image.label_tag }}#}
{#                                                {{ form.image.errors }}#}
{##}
{#                                                    <img alt="profil image" width="130" class="rounded mb-2 img-thumbnail mr-2" src="{{ user.profile.image.url }}">#}
{#                                                    {{ form.image }}#}
{##}
{#                                         </div>#}
                                         <div class="form-group">
                                                {{ form.image.label_tag }}
                                                {{ form.image.errors }}

                                                <label for="id_image">
                                                    <img id="preview-image" alt="profil image" width="130" class="rounded mb-2 img-thumbnail mr-2" src="{{ user.profile.image.url }}">
                                                </label>

                                                <input type="file" name="{{ form.image.name }}" id="id_image" style="display: none;" onchange="previewFile(this)">
                                         </div>

<script>
    function previewFile(input) {
        var file = input.files[0];
        var reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('preview-image').src = e.target.result;
        };
        reader.readAsDataURL(file);
    }
</script>


                                            <input class="btn btn-primary" type="submit" value="Edit">
                                     </form>

                            </div>


                    </div>
                </div>
        </div>




</body>
</html>
{% endblock %}

